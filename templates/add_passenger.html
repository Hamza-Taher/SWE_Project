{% extends "base.html" %}
{% block content %}
<header style="margin-bottom: 20px;">
    <h1>Passenger Dashboard</h1>
    <p>Welcome back, <strong>{{ passenger.first_name|capitalize }}</strong>!</p>
</header>

<div style="display: grid; grid-template-columns: 1fr 2fr; gap: 20px; margin-top: 20px;">
    <div class="card">
        <h3>Your Profile</h3>
        <p><strong>Username:</strong> {{ passenger.username }}</p>
        <p><strong>Email:</strong> {{ passenger.email }}</p>
        <p><strong>Passport:</strong> {{ passenger.passport_number }}</p>
        <hr>
        <p>Current Flight ID: <span class="btn-gold" style="padding: 2px 10px; border-radius: 15px;">{{ passenger.flight_number or 'None' }}</span></p>
    </div>

    <div class="card">
        <h3>Book or Change Flight</h3>
        <form action="{{ url_for('add_passenger') }}" method="POST">
            <div class="form-group">
                <label for="flight_number">Select Available Destination:</label>
                <select name="flight_number" id="flight_number" required>
                    <option value="" disabled selected>-- Choose a destination --</option>
                    {% for flight in flights %}
                        <option value="{{ flight.id }}">
                            {{ flight.destination }} | {{ flight.flight_date }}
                        </option>
                    {% endfor %}
                </select>
            </div>
            <button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 10px;">Confirm Flight Update</button>
        </form>
    </div>
</div>

<section style="margin-top: 40px;">
    <h3>Available Flight Schedule</h3>
    <table>
        <thead>
            <tr>
                <th>Flight ID</th>
                <th>Destination</th>
                <th>Date</th>
                <th>Departure</th>
                <th>Arrival</th>
            </tr>
        </thead>
        <tbody>
            {% for flight in flights %}
            <tr>
                <td><strong>#{{ flight.id }}</strong></td>
                <td>{{ flight.destination }}</td>
                <td>{{ flight.flight_date }}</td>
                <td>{{ flight.departure_time }}</td>
                <td>{{ flight.arrival_time }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</section>
{% endblock %}